<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  

  <script>

    function Set(){
      // 用Object中的key来存储集合的值
      this.items = {};

      // add(value):向集合添加一个value
      Set.prototype.add = function(value){
        // 判断当前集合是否包含此元素
        if(this.has())
          return false;

        this.items[value + ''] = value;
        return this.size();
      }

      // remove(value):从集合移除value
      Set.prototype.remove = function(value){
        if(!this.has(value))
          return false;

        delete this.items[value + ''];
        return value;
      }

      // has(value):value在集合中,返回true,否则返回false
      Set.prototype.has = function(value){
        return this.items.hasOwnProperty(value);
      }
  
      // clear():移除集合的所有元素
      Set.prototype.clear = function(){
        this.items = {};
        // for(var prop in this.items){
        //   delete this.items[prop];
        // }
        // this.length = 0;
        return true;
      }

      // size():返回集合的元素个数
      Set.prototype.size = function(){
        // var count = 0;
        // for(var prop in this.items){
        //   count ++;
        // }
        // return count;

        // Object.keys():返回一个包含对象的所有key的数组
        return Object.keys(this.items).length;
      }

      // values():返回一个包含集合所有元素的数组
      Set.prototype.values = function(){
        // var temp_arr = [];
        // var index = 0;
        // for(var prop in this.items){
        //   temp_arr[index ++] = prop;
        // }
        // return temp_arr;

        // Object.keys():返回一个包含对象的所有key的数组
        return Object.keys(this.items);
      }
    
      // union(otherSet):合并两个集合，不改原集合
      Set.prototype.union = function(otherSet){
        // 创建新的集合
        var newSet = new Set();

        // 将集合A的元素添加到newSet
        var values = this.values();
        for(var i = 0; i < values.length; i ++){
          newSet.add(values[i]);
        }

        // 将集合B的元素添加到newSet
        values = otherSet.values();
        for(var i = 0; i < values.length; i ++){
          newSet.add(values[i]);
        }

        return newSet;
      }

      // intersection(otherSet):取两个集合的交集
      Set.prototype.intersection = function(otherSet){
        // 创建一个新集合
        var newSet = new Set();
        // 判断A集合的元素是否在B集合中，B有则添加到newSet集合中
        var values = this.values();
        for(var i = 0; i < values.length; i ++){
          if(otherSet.has(values[i])){
            newSet.add(values[i]);
          }
        }

        return newSet;
      }

      // difference(otherSet):A-B,两个集合的差集
      Set.prototype.difference = function(otherSet){
        // 创建新集合
        var newSet = new Set();
        
        // 将A中特有的元素添加到newSet中,B没有的就加入到newSet
        var values = this.values();
        for(var i = 0; i < values.length; i ++){
          if(!otherSet.has(values[i])){
            newSet.add(values[i]);
          }
        }

        return newSet;
      }
      
      // 判断A是否为B的子集
      Set.prototype.subset = function(otherSet){
        // 如果A中有元素不在B中，则不是B的子集
        var values = this.values();
        for(var i = 0; i < values.length; i ++){
          if(!otherSet.has(values[i])){
            return false;
          }
        }

        return true;
      }
    }

    // 测试代码
    console.log("A test");
    var setA = new Set();
    console.log(setA.add("moon"));
    console.log(setA.add("difference"));
    console.log(setA.add("moon"));
    console.log(setA.add("sun"));
    console.log(setA.add("hao"));
    console.log(setA.size());
    console.log(setA.values());

    console.log(setA.has("moon"));
    console.log(setA.remove("hao"));
    console.log(setA.remove("hao"));
    console.log("A:",setA.values());

    var setB = new Set();
    setB.add(1);
    setB.add("sun");
    setB.add("hao");
    setB.add("moon");
    console.log("B:",setB.values());
    console.log("A U B:",setA.union(setB));

    console.log("-----");
    console.log("A intersection B:",setA.intersection(setB));
    console.log("A-B:",setA.difference(setB));
    console.log("B-A:",setB.difference(setA));

    var setC = setB;
    console.log("C:",setC.values());
    console.log("A is B subset:",setA.subset(setB));
    console.log("c is B subset:",setC.subset(setB));


    // delete Object.属性
    // for(var prop in Object)
    // Object.hasOwnProperty(prop)
  </script>
</body>
</html>