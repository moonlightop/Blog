<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <script>
        // 增删查改 + ...
        // list_head(链表头) ... list_tail(链表尾)
        function LinkList(){
            // head是首元节点：指向头节点的指针
            this.head = null;
            this.length = 0;
            
            function Node(data){
                this.data = data;
                this.next = null;
            }

            // append(element):链表尾加元素
            LinkList.prototype.append = function(element){
                var newNode = new Node(element);
                if(this.length == 0){
                    this.head = newNode;
                }else{
                    var node = this.head;
                    // 获取最后一个节点
                    while(node.next){
                        node = node.next;
                    }
                    node.next = newNode;
                }
                
                return ++ this.length;
            }
            // insert(position,element):在position位置插入element    
            // position: 0 ~ n 
            LinkList.prototype.insert = function(position,element){
                // 1、position的越界处理
                if(position < 0 || position > this.length || !this.length)
                    return false

                var newNode = new Node(element);
                if(position == 0){
                    newNode.next = this.head;
                    this.head = newNode;
                }else{
                    var prev = null;
                    var node = this.head;
                    // 使得node指向position位置的节点
                    while(position){
                        prev = node;
                        node = node.next;
                        position --;
                    }
                    prev.next = newNode;
                    newNode.next = node;
                }
                
                return ++ this.length;
            }
            
            // get(position):获取position位置的element
            LinkList.prototype.get = function(position){
                // 1、越界判断,链表非null判断
                if(position < 0 || position >= this.length || !this.length)
                    return -1;

                var node = this.head;
                while(position){
                    node = node.next;
                    position --;
                }

                return node.data; 
            }
            // indexOf(element):获取某个元素所在的下标,没有返回-1
            LinkList.prototype.indexOf = function(element){
                var node = this.head;
                var index = 0;
                while(node){
                    if(node.data == element){
                        return index;
                    }
                    node = node.next;
                    index ++;
                }
                return -1;
            }
            
            // update(position,element):修改position位置的元素为element
            LinkList.prototype.updata = function(position,element){
                // 越界判断,链表为NULL
                if(position < 0 || position > this.length - 1 || !this.length)
                    return false;
                
                var node = this.head;
                while(position){
                    node = node.next;
                    position --;
                }
                node.data = element;
                return true;
            }
            
            // removeAt(position):移除position位置的元素
            LinkList.prototype.removeAt = function(position){
                // 1、越界判断
                if(position < 0 || position > this.length - 1){
                    return false;
                }

                var node = this.head;
                
                // 2、position为0
                if(position == 0){
                    this.head = node.next;
                }else{
                    var prev = node;
                    while(position){
                        prev = node;
                        node = node.next;
                        position --;
                    }
                    prev.next = node.next;
                }
                node.next = null;
                this.length --;

                // 返回移除的节点的数据
                return node.data;
            }
            // remove(element):移除链表的element元素
            LinkList.prototype.remove = function(element){
                var index = this.indexOf(element);
                return this.removeAt(index);
            }
            
            // isEmpty()
            LinkList.prototype.isEmpty = function(){
                return this.length === 0;
            }
            // size()
            LinkList.prototype.size = function(){
                return this.length;
            }
            // toString()
            LinkList.prototype.toString = function(){
                var resultString = '';
                var node = this.head;
                // this.head空就直接跳过了
                while(node){
                    resultString += node.data;
                    node = node.next;
                 }
                return resultString;
            }
        }

        var linkList = new LinkList();

    </script>
</body>
</html>